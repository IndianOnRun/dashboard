<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1><%= title %></h1>
    <div id="totalPageViews"></div>
    <div id="currentPageViews"></div>
    <ul id="pageViews"></ul>
    <script>
      var socket = io.connect('http://localhost'); 

      socket.on('connect', function () {
          socket.on('pageview', function (msg) {
              $('#pageViews').append('<li>' + msg.url + '</li>');
          });

        socket.on('totalPageViews', function(data){
          $('#totalPageViews').html('<h1>Total Page Views: ' + data.views + '</h1>')
        });

        socket.on('currentPageViews', function(data){
          $('#currentPageViews').html('<h1>Current Page Views: ' + data.views + '</h1>')
        });
      });
    </script>
    </script>
  </body>
</html>